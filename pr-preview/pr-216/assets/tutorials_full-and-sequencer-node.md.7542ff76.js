import{_ as s,o as a,c as n,V as l}from"./chunks/framework.29d3474f.js";const d=JSON.parse('{"title":"Full and sequencer node rollup setup","description":"","frontmatter":{},"headers":[],"relativePath":"tutorials/full-and-sequencer-node.md","filePath":"tutorials/full-and-sequencer-node.md","lastUpdated":1692371712000}'),o={name:"tutorials/full-and-sequencer-node.md"},p=l(`<h1 id="full-and-sequencer-node-rollup-setup" tabindex="-1">Full and sequencer node rollup setup <a class="header-anchor" href="#full-and-sequencer-node-rollup-setup" aria-label="Permalink to &quot;Full and sequencer node rollup setup&quot;">​</a></h1><p>This guide will cover how to set up the GM World rollup example as a multi-node network using a full and sequencer node.</p><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><p>First, you&#39;ll need to complete the <a href="./gm-world">GM World</a> tutorial.</p><p>In this demo, we&#39;ll be using the local-celestia-devnet setup used in <a href="./gm-world#part-one">Part One</a>.</p><h2 id="getting-started" tabindex="-1">Getting started <a class="header-anchor" href="#getting-started" aria-label="Permalink to &quot;Getting started&quot;">​</a></h2><p>For running a full node, you will need to update <code>NAMESPACE_ID</code>, <code>DA_HEIGHT</code>, <code>P2P_ID</code>, and <code>AUTH_TOKEN</code> manually. You can retrieve namespace and height from your terminal output from when you ran the <code>init-local.sh</code> or script.</p><p>They will be printed before your chain starts:</p><div class="language-txt"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight has-focused-lines"><code><span class="line"><span style="color:#A6ACCD;">______         _  _  _     _  _</span></span>
<span class="line"><span style="color:#A6ACCD;">| ___ \\       | || || |   (_)| |</span></span>
<span class="line"><span style="color:#A6ACCD;">| |_/ /  ___  | || || | __ _ | |_</span></span>
<span class="line"><span style="color:#A6ACCD;">|    /  / _ \\ | || || |/ /| || __|</span></span>
<span class="line"><span style="color:#A6ACCD;">| |\\ \\ | (_) || || ||   &lt; | || |_</span></span>
<span class="line"><span style="color:#A6ACCD;">\\_| \\_| \\___/ |_||_||_|\\_\\|_| \\__|</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line has-focus"><span style="color:#A6ACCD;"> Your NAMESPACE_ID is 31e2c345c895c3577bea </span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line has-focus"><span style="color:#A6ACCD;"> Your DA_BLOCK_HEIGHT is 5 </span></span></code></pre></div><p>Now, clone the script for the full node:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># From inside the \`gm\` directory</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> $HOME</span><span style="color:#C3E88D;">/gm</span></span>
<span class="line"><span style="color:#FFCB6B;">wget</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://raw.githubusercontent.com/rollkit/docs/main/scripts/gm/init-full-node.sh</span></span></code></pre></div><p>Next, you can open the script and set your namespace and DA height from above:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight has-diff"><code><span class="line diff remove"><span style="color:#A6ACCD;">DA_BLOCK_HEIGHT</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">your-block-height</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">DA_BLOCK_HEIGHT</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">NAMESPACE_ID</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">your-namespace</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">NAMESPACE_ID</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">31e2c345c895c3577bea</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">P2P_ID</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">your-p2p-id</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">AUTH_TOKEN</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">your-auth-token</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div><p>Next, we&#39;ll update the p2p address.</p><p>Once your sequencer starts producing blocks, it will show the p2p address, beginning with 12D:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight has-focused-lines"><code><span class="line"><span style="color:#FFCB6B;">3:55PM</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">INF</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">port</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">binded</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module=x/ibc/port</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">port=icahost</span></span>
<span class="line"><span style="color:#FFCB6B;">3:55PM</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">INF</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">claimed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">capability</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">capability=</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module=icahost</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">name=ports/icahost</span></span>
<span class="line"><span style="color:#FFCB6B;">3:55PM</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">INF</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">service</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">impl=RPC</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module=server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">msg={}</span></span>
<span class="line"><span style="color:#FFCB6B;">3:55PM</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">INF</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">service</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">impl=Node</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module=server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">msg={}</span></span>
<span class="line"><span style="color:#FFCB6B;">3:55PM</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">INF</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">starting</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">P2P</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">client</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module=server</span></span>
<span class="line"><span style="color:#FFCB6B;">3:55PM</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">INF</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">serving</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">HTTP</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">listen</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">address={</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">IP</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">127.0.0.1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Port</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:26657,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Zone</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:</span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#C3E88D;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module=server</span></span>
<span class="line has-focus"><span style="color:#FFCB6B;">3:55PM</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">INF</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">listening</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">on</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">address=/ip4/10.0.0.171/tcp/26656/p2p/12D3KooWCmfJLkQjZUArWpNUDJSezeFiLYzCULXe1dEKY6ZpXZpk</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module=p2p</span><span style="color:#A6ACCD;"> </span></span>
<span class="line has-focus"><span style="color:#FFCB6B;">3:55PM</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">INF</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">listening</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">on</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">address=/ip4/127.0.0.1/tcp/26656/p2p/12D3KooWCmfJLkQjZUArWpNUDJSezeFiLYzCULXe1dEKY6ZpXZpk</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module=p2p</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#FFCB6B;">3:55PM</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">INF</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">no</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">seed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nodes</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">only</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">listening</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">connections</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module=p2p</span></span>
<span class="line"><span style="color:#FFCB6B;">3:55PM</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">INF</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">starting</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Celestia</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Data</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Availability</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Layer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Client</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">baseURL=http://localhost:26658</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">module=da_client</span></span></code></pre></div><p>In your <code>init-full-node.sh</code> script, you will now set the <code>P2P_ADDRESS</code> variable for your script to use:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight has-diff"><code><span class="line"><span style="color:#A6ACCD;">DA_BLOCK_HEIGHT</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">5</span></span>
<span class="line"><span style="color:#A6ACCD;">NAMESPACE_ID</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">31e2c345c895c3577bea</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">P2P_ID</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">your-p2p-id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">P2P_ID</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">12D3KooWCmfJLkQjZUArWpNUDJSezeFiLYzCULXe1dEKY6ZpXZpk</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">AUTH_TOKEN</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">your-auth-token</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div><p>Now, set your <code>AUTH_TOKEN</code> from the local-celestia-devnet. You can find this in the <code>init-local.sh</code> script that you used to start the gmd sequencer:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight has-diff"><code><span class="line"><span style="color:#A6ACCD;">DA_BLOCK_HEIGHT</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">5</span></span>
<span class="line"><span style="color:#A6ACCD;">NAMESPACE_ID</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">31e2c345c895c3577bea</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">P2P_ID</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">12D3KooWCmfJLkQjZUArWpNUDJSezeFiLYzCULXe1dEKY6ZpXZpk</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line diff remove"><span style="color:#A6ACCD;">AUTH_TOKEN</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">your-auth-token</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line diff add"><span style="color:#A6ACCD;">AUTH_TOKEN</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJBbGxvdyI6WyJwdWJsaWMiLCJyZWFkIiwid3JpdGUiLCJhZG1pbiJdfQ.eGomBzJoIEZdQyFyYtbW52ManZx4hWT6k6opvg4GPHw</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span></span></code></pre></div><p>Open a new terminal to run your full node and run the script:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># from the gm directory</span></span>
<span class="line"><span style="color:#FFCB6B;">bash</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">init-full-node.sh</span></span></code></pre></div><p>Congratulations! You will now have a full node running alongside your Rollkit sequencer.</p>`,23),e=[p];function t(c,r,C,D,y,i){return a(),n("div",null,e)}const u=s(o,[["render",t]]);export{d as __pageData,u as default};
