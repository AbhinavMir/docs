<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-tutorials/cosmwasm">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">CosmWasm and Rollkit | Rollkit</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://rollkit.dev/pr-preview/pr-79/img/RollKit.png"><meta data-rh="true" name="twitter:image" content="https://rollkit.dev/pr-preview/pr-79/img/RollKit.png"><meta data-rh="true" property="og:url" content="https://rollkit.dev/pr-preview/pr-79/docs/tutorials/cosmwasm/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="CosmWasm and Rollkit | Rollkit"><meta data-rh="true" name="description" content="Build a sovereign rollup with CosmWasm, Celestia, and Rollkit."><meta data-rh="true" property="og:description" content="Build a sovereign rollup with CosmWasm, Celestia, and Rollkit."><link data-rh="true" rel="icon" href="/pr-preview/pr-79/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://rollkit.dev/pr-preview/pr-79/docs/tutorials/cosmwasm/"><link data-rh="true" rel="alternate" href="https://rollkit.dev/pr-preview/pr-79/docs/tutorials/cosmwasm/" hreflang="en"><link data-rh="true" rel="alternate" href="https://rollkit.dev/pr-preview/pr-79/docs/tutorials/cosmwasm/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/pr-preview/pr-79/blog/rss.xml" title="Rollkit RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/pr-preview/pr-79/blog/atom.xml" title="Rollkit Atom Feed">



<script src="https://plausible.celestia.org/js/plausible.js" defer="defer" data-domain="rollkit.dev"></script><link rel="stylesheet" href="/pr-preview/pr-79/assets/css/styles.4ef5c838.css">
<link rel="preload" href="/pr-preview/pr-79/assets/js/runtime~main.e0b7e4af.js" as="script">
<link rel="preload" href="/pr-preview/pr-79/assets/js/main.9b0ee162.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/pr-preview/pr-79/"><div class="navbar__logo"><img src="/pr-preview/pr-79/img/toolbox.svg" alt="Rollkit logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/pr-preview/pr-79/img/toolbox.svg" alt="Rollkit logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Rollkit v0</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pr-preview/pr-79/docs/intro/">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Community</a><ul class="dropdown__menu"><li><a href="https://discord.com/channels/638338779505229824/1065974175237414972" target="_blank" rel="noopener noreferrer" class="dropdown__link">Discord<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/rollkit" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/pr-79/docs/intro/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/pr-79/docs/rollkit-stack/">Rollkit Stack</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/pr-preview/pr-79/docs/category/tutorials/">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-79/docs/tutorials/building-and-deploying-a-rollup/">Building &amp; Deploying a Rollup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-79/docs/tutorials/gm-world/">GM World Tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-79/docs/tutorials/recipe-book/">Recipe Book Rollup Tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-79/docs/tutorials/wordle/">Wordle Tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/pr-preview/pr-79/docs/tutorials/cosmwasm/">CosmWasm Tutorial</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-79/docs/tutorials/ethermint/">Ethermint Tutorial</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/pr-preview/pr-79/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/pr-preview/pr-79/docs/category/tutorials/"><span itemprop="name">Tutorials</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">CosmWasm Tutorial</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>CosmWasm and Rollkit</h1><p>CosmWasm is a smart contracting platform built for the Cosmos
ecosystem by making use of <a href="https://webassembly.org" target="_blank" rel="noopener noreferrer">WebAssembly</a> (Wasm)
to build smart contracts for Cosmos-SDK. In this tutorial, we will be
exploring how to integrate CosmWasm with Celestia&#x27;s
<a href="https://docs.celestia.org/concepts/how-celestia-works/data-availability-layer" target="_blank" rel="noopener noreferrer">Data Availability Layer</a>
using Rollkit.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>This tutorial will explore developing with Rollkit,
which is still in Alpha stage. If you run into bugs, please write a Github
<a href="https://github.com/rollkit/docs/issues/new" target="_blank" rel="noopener noreferrer">Issue ticket</a>
or let us know in our <a href="https://discord.com/channels/638338779505229824/1065974175237414972" target="_blank" rel="noopener noreferrer">Discord</a>.
Furthermore, while Rollkit allows you to build sovereign rollups
on Celestia, it currently does not support fraud proofs yet and is
therefore running in &quot;pessimistic&quot; mode, where nodes would need to
re-execute the transactions to check the validity of the chain
(i.e. a full node). Furthermore, Rollkit currently only supports
a single sequencer.</p></div></div><div class="theme-admonition theme-admonition-danger alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>The script for this tutorial is built for Mocha Testnet.
If you choose to use Arabica Devnet,
you will need to modify the script manually.</p></div></div><p>You can learn more about CosmWasm <a href="https://docs.cosmwasm.com/docs/1.0" target="_blank" rel="noopener noreferrer">here</a>.</p><p>In this tutorial, we will going over the following:</p><ol><li><a href="#setting-up-your-environment-for-cosmwasm-on-celestia">Setting up your dependencies for your CosmWasm smart contracts</a></li><li><a href="#wasmd-installation">Setting up Rollkit on CosmWasm</a></li><li><a href="#contract-interaction-on-cosmwasm-with-celestia">Instantiate a local network for your CosmWasm chain connected to Celestia</a></li><li><a href="#contract-deployment-on-cosmwasm-with-rollkit">Deploying a Rust smart contract to CosmWasm chain</a></li><li><a href="#contract-interaction-on-cosmwasm-with-celestia">Interacting with the smart contract</a></li></ol><p>The smart contract we will use for this tutorial is one provided by
the CosmWasm team for Nameservice purchasing.</p><p>You can check out the contract <a href="https://github.com/InterWasm/cw-contracts/tree/main/contracts/nameservice" target="_blank" rel="noopener noreferrer">here</a>.</p><p>How to write the Rust smart contract for Nameservice is outside the scope of
this tutorial. In the future we will add more tutorials for writing CosmWasm
smart contracts for Celestia.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cosmwasm-dependency-installations">CosmWasm Dependency Installations<a class="hash-link" href="#cosmwasm-dependency-installations" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="environment-setup">Environment Setup<a class="hash-link" href="#environment-setup" title="Direct link to heading">​</a></h3><p>For this tutorial, we will be using <code>curl</code> and <code>jq</code> as helpful
tools. You can follow the guide on installing them
<a href="https://docs.celestia.org/nodes/environment/#-install-wget-and-jq" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="golang-dependency">Golang Dependency<a class="hash-link" href="#golang-dependency" title="Direct link to heading">​</a></h3><p>The Golang version used for this tutorial is v1.18+</p><p>You can install Golang
by following our tutorial <a href="https://docs.celestia.org/nodes/environment#install-golang" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rust-installation">Rust Installation<a class="hash-link" href="#rust-installation" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="rustup">Rustup<a class="hash-link" href="#rustup" title="Direct link to heading">​</a></h4><p>First, before installing Rust, you would need to install <code>rustup</code>.</p><p>On Mac and Linux systems, here are the commands for installing it:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">curl</span><span class="token plain"> --proto </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;=https&#x27;</span><span class="token plain"> --tlsv1.2 -sSf https://sh.rustup.rs </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-danger alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>You will see a note similar to below after installing Rust:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Rust is installed now. Great</span><span class="token operator">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">To get started you may need to restart your current shell.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">This would reload your </span><span class="token environment constant" style="color:rgb(189, 147, 249)">PATH</span><span class="token plain"> environment variable to include</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Cargo&#x27;s bin directory </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token plain">/.cargo/bin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">To configure your current shell, run:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">source</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token string" style="color:rgb(255, 121, 198)">/.cargo/env&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you don&#x27;t follow the guidance, you won&#x27;t be able to continue with the
tutorial!</p></div></div><p>After installation, follow the commands here to setup Rust.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">rustup default stable</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo version</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rustup target list --installed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rustup target </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> wasm32-unknown-unknown</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Your output should look similar to below:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">info: using existing </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;stable-aarch64-apple-darwin&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">info: default toolchain </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">set</span><span class="token plain"> to </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;stable-aarch64-apple-darwin&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  stable-aarch64-apple-darwin unchanged - rustc </span><span class="token number">1.65</span><span class="token plain">.0 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">897e37553 </span><span class="token number">2022</span><span class="token plain">-11-02</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo </span><span class="token number">1.65</span><span class="token plain">.0 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">4bc8f24d3 </span><span class="token number">2022</span><span class="token plain">-10-20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">aarch64-apple-darwin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">info: downloading component </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;rust-std&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;wasm32-unknown-unknown&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">info: installing component </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;rust-std&#x27;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;wasm32-unknown-unknown&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-installation">Docker Installation<a class="hash-link" href="#docker-installation" title="Direct link to heading">​</a></h3><p>We will be using Docker later in this tutorial for compiling a smart contract
to use a small footprint. We recommend installing Docker on your machine.</p><p>Examples on how to install it on Linux are found <a href="https://docs.docker.com/engine/install/ubuntu" target="_blank" rel="noopener noreferrer">here</a>.
Find the right instructions specific for
<a href="https://docs.docker.com/engine/install" target="_blank" rel="noopener noreferrer">your OS here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="wasmd-installation">wasmd Installation<a class="hash-link" href="#wasmd-installation" title="Direct link to heading">​</a></h3><p>Here, we are going to pull down the <code>wasmd</code> repository and replace Tendermint
with Rollkit. Rollkit is a drop-in replacement for Tendermint that allows
Cosmos-SDK applications to connect to Celestia&#x27;s Data Availability network.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> clone https://github.com/CosmWasm/wasmd.git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> wasmd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> fetch --tags</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> checkout v0.27.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go mod edit -replace github.com/cosmos/cosmos-sdk</span><span class="token operator">=</span><span class="token plain">github.com/celestiaorg/cosmos-sdk-rollmint@v0.45.10-rollmint-v0.5.0-no-fraud-proofs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go mod edit -replace github.com/tendermint/tendermint</span><span class="token operator">=</span><span class="token plain">github.com/celestiaorg/tendermint@v0.34.22-0.20221013213714-8be9b54c8c21</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go mod tidy -compat</span><span class="token operator">=</span><span class="token number">1.17</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">go mod download</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">make</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="celestia-node">Celestia Node<a class="hash-link" href="#celestia-node" title="Direct link to heading">​</a></h3><p>You will need a light node running with test tokens on Mocha Testnet in order
to complete this tutorial. Please complete the tutorial
<a href="https://docs.celestia.org/developers/node-tutorial" target="_blank" rel="noopener noreferrer">here</a>, or start up your node.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="setting-up-your-environment-for-cosmwasm-on-celestia">Setting Up Your Environment for CosmWasm on Celestia<a class="hash-link" href="#setting-up-your-environment-for-cosmwasm-on-celestia" title="Direct link to heading">​</a></h2><p>Now the <code>wasmd</code> binary is built, we need to setup a local network
that communicates between <code>wasmd</code> and Rollkit.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="initializing-cosmwasm-rollup-with-a-bash-script">Initializing Cosmwasm Rollup with a Bash Script<a class="hash-link" href="#initializing-cosmwasm-rollup-with-a-bash-script" title="Direct link to heading">​</a></h3><p>We have a handy <code>init.sh</code> found in this repo
<a href="https://github.com/celestiaorg/devrel-tools" target="_blank" rel="noopener noreferrer">here</a>.</p><p>We can copy it over to our directory with the following commands:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># From inside the `wasmd` directory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> clone https://github.com/celestiaorg/devrel-tools</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">cp</span><span class="token plain"> devrel-tools/cosmwasm/init.sh wasmd/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> wasmd/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This copies over our <code>init.sh</code> script to initialize our
CosmWasm rollup.</p><p>You can view the contents of the script to see how we
initialize the CosmWasm Rollup.</p><div class="theme-admonition theme-admonition-danger alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>If you are on macOS, you will need to install md5sha1sum before starting your
rollup:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">brew </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> md5sha1sum</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><p>You can initialize the script with the following command:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">bash</span><span class="token plain"> init.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With that, we have kickstarted our <code>wasmd</code> network!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="optional-see-whats-inside-the-script">Optional: See what&#x27;s inside the script<a class="hash-link" href="#optional-see-whats-inside-the-script" title="Direct link to heading">​</a></h3><p>You can skip this section, but it is important to know
how Rollkit is initializing the cosmwasm rollup.</p><p>Here are the contents of the script:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token shebang important">#!/bin/sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">VALIDATOR_NAME</span><span class="token operator">=</span><span class="token plain">validator1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">CHAIN_ID</span><span class="token operator">=</span><span class="token plain">celeswasm</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">KEY_NAME</span><span class="token operator">=</span><span class="token plain">celeswasm-key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">TOKEN_AMOUNT</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;10000000000000000000000000uwasm&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">STAKING_AMOUNT</span><span class="token operator">=</span><span class="token plain">1000000000uwasm</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">CHAINFLAG</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;--chain-id </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${CHAIN_ID}</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">TXFLAG</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;--chain-id </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${CHAIN_ID}</span><span class="token string" style="color:rgb(255, 121, 198)"> --gas-prices 0uwasm --gas auto --gas-adjustment 1.3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">NODEIP</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;--node http://127.0.0.1:26657&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">NAMESPACE_ID</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable builtin class-name" style="color:rgb(189, 147, 249);font-style:italic">echo</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable environment constant" style="color:rgb(189, 147, 249);font-style:italic">$RANDOM</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> md5sum </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">head</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> -c </span><span class="token variable number" style="color:rgb(189, 147, 249);font-style:italic">16</span><span class="token variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> </span><span class="token variable builtin class-name" style="color:rgb(189, 147, 249);font-style:italic">echo</span><span class="token variable punctuation" style="color:rgb(248, 248, 242);font-style:italic">;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$NAMESPACE_ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">DA_BLOCK_HEIGHT</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable function" style="color:rgb(80, 250, 123);font-style:italic">curl</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> https://rpc-mocha.pops.one/block </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> jq -r </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&#x27;.result.block.header.height&#x27;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$DA_BLOCK_HEIGHT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">rm</span><span class="token plain"> -rf </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain">/.wasmd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wasmd tendermint unsafe-reset-all</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wasmd init </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$VALIDATOR_NAME</span><span class="token plain"> --chain-id </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$CHAIN_ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> -i</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;&#x27;</span><span class="token plain"> -e </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;s/^minimum-gas-prices *= .*/minimum-gas-prices = &quot;0uwasm&quot;/&#x27;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain">/.wasmd/config/app.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> -i</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;&#x27;</span><span class="token plain"> -e </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/\[api\]/,+3 s/enable *= .*/enable = true/&#x27;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain">/.wasmd/config/app.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> -i</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;&#x27;</span><span class="token plain"> -e </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;s/^chain-id *= .*/chain-id = </span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$CHAIN_ID</span><span class="token string entity" style="color:rgb(255, 121, 198)">\&quot;</span><span class="token string" style="color:rgb(255, 121, 198)">/&quot;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain">/.wasmd/config/client.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> -i</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;&#x27;</span><span class="token plain"> -e </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;/\[rpc\]/,+3 s/laddr *= .*/laddr = &quot;tcp:\/\/0.0.0.0:26657&quot;/&#x27;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain">/.wasmd/config/config.toml</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> -i</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;&#x27;</span><span class="token plain"> -e </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;s/&quot;time_iota_ms&quot;: &quot;1000&quot;/&quot;time_iota_ms&quot;: &quot;10&quot;/&#x27;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain">/.wasmd/config/genesis.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> -i</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;&#x27;</span><span class="token plain"> -e </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;s/bond_denom&quot;: &quot;.*&quot;/bond_denom&quot;: &quot;uwasm&quot;/&#x27;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain">/.wasmd/config/genesis.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sed</span><span class="token plain"> -i</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;&#x27;</span><span class="token plain"> -e </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;s/mint_denom&quot;: &quot;.*&quot;/mint_denom&quot;: &quot;uwasm&quot;/&#x27;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string environment constant" style="color:rgb(189, 147, 249)">$HOME</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain">/.wasmd/config/genesis.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wasmd keys </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$KEY_NAME</span><span class="token plain"> --keyring-backend </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wasmd add-genesis-account </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$KEY_NAME</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$TOKEN_AMOUNT</span><span class="token plain"> --keyring-backend </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wasmd gentx </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$KEY_NAME</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$STAKING_AMOUNT</span><span class="token plain"> --chain-id </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$CHAIN_ID</span><span class="token plain"> --keyring-backend </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wasmd start --rollmint.aggregator </span><span class="token boolean">true</span><span class="token plain"> --rollmint.da_layer celestia --rollmint.da_config</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{&quot;base_url&quot;:&quot;http://localhost:26659&quot;,&quot;timeout&quot;:60000000000,&quot;fee&quot;:6000,&quot;gas_limit&quot;:6000000}&#x27;</span><span class="token plain"> --rollmint.namespace_id </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$NAMESPACE_ID</span><span class="token plain"> --rollmint.da_start_height </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$DA_BLOCK_HEIGHT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="contract-deployment-on-cosmwasm-with-rollkit">Contract Deployment on CosmWasm with Rollkit<a class="hash-link" href="#contract-deployment-on-cosmwasm-with-rollkit" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="compile-the-smart-contract">Compile the Smart Contract<a class="hash-link" href="#compile-the-smart-contract" title="Direct link to heading">​</a></h3><p>In a new terminal instance, we will run the following commands to pull down the
Nameservice smart contract and compile it:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">git</span><span class="token plain"> clone https://github.com/InterWasm/cw-contracts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> cw-contracts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> contracts/nameservice</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo wasm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The compiled contract is outputted to:
<code>target/wasm32-unknown-unknown/release/cw_nameservice.wasm</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unit-tests">Unit Tests<a class="hash-link" href="#unit-tests" title="Direct link to heading">​</a></h3><p>If we want to run tests, we can do so with the following command in the
<code>~/cw-contracts/contracts/nameservice</code> directory:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cargo unit-test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="optimized-smart-contract">Optimized Smart Contract<a class="hash-link" href="#optimized-smart-contract" title="Direct link to heading">​</a></h3><p>Because we are deploying the compiled smart contract to <code>wasmd</code>,
we want it to be as small as possible.</p><p>The CosmWasm team provides a tool called <code>rust-optimizer</code> which we need
<a href="#docker-installation">Docker</a> for in order to compile.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">AMD</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">ARM</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="amd-machines">AMD Machines<a class="hash-link" href="#amd-machines" title="Direct link to heading">​</a></h3><p>Run the following command in the <code>~/cw-contracts/contracts/nameservice</code>
directory:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> run --rm -v </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable builtin class-name" style="color:rgb(189, 147, 249);font-style:italic">pwd</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain">:/code </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --mount </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token operator">=</span><span class="token plain">volume,source</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;$(basename &quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable builtin class-name" style="color:rgb(189, 147, 249);font-style:italic">pwd</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">_cache&quot;,target</span><span class="token operator">=</span><span class="token plain">/code/target </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --mount </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token operator">=</span><span class="token plain">volume,source</span><span class="token operator">=</span><span class="token plain">registry_cache,target</span><span class="token operator">=</span><span class="token plain">/usr/local/cargo/registry </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  cosmwasm/rust-optimizer:0.12.6</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will place the optimized Wasm bytecode at <code>artifacts/cw_nameservice.wasm</code>.</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><h3 class="anchor anchorWithStickyNavbar_LWe7" id="arm-machines">ARM Machines<a class="hash-link" href="#arm-machines" title="Direct link to heading">​</a></h3><p>Run the following command in the <code>~/cw-contracts/contracts/nameservice</code>
directory:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> run --platform linux/arm64 --rm -v </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable builtin class-name" style="color:rgb(189, 147, 249);font-style:italic">pwd</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain">:/code </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --mount </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token operator">=</span><span class="token plain">volume,source</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;$(basename &quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token string variable builtin class-name" style="color:rgb(189, 147, 249);font-style:italic">pwd</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">_cache&quot;,target</span><span class="token operator">=</span><span class="token plain">/code/target </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  --mount </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token operator">=</span><span class="token plain">volume,source</span><span class="token operator">=</span><span class="token plain">registry_cache,target</span><span class="token operator">=</span><span class="token plain">/usr/local/cargo/registry </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  cosmwasm/rust-optimizer-arm64:0.12.8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will place the optimized Wasm bytecode at <code>artifacts/cw_nameservice-aarch64.wasm</code>.</p></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="contract-deployment">Contract Deployment<a class="hash-link" href="#contract-deployment" title="Direct link to heading">​</a></h3><p>Let&#x27;s now deploy our smart contract!</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">AMD</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">ARM</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="amd-machines-1">AMD Machines<a class="hash-link" href="#amd-machines-1" title="Direct link to heading">​</a></h3><p>Run the following in the <code>~/cw-contracts/contracts/nameservice</code> directory:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">TX_HASH</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">wasmd tx wasm store artifacts/cw_nameservice.wasm --from celeswasm-key --keyring-backend </span><span class="token variable builtin class-name" style="color:rgb(189, 147, 249);font-style:italic">test</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> --chain-id celeswasm --gas-prices 0uwasm --gas auto --gas-adjustment </span><span class="token variable number" style="color:rgb(189, 147, 249);font-style:italic">1.3</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> --node http://127.0.0.1:26657 --output json -y </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> jq -r </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&#x27;.txhash&#x27;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$TX_HASH</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><h3 class="anchor anchorWithStickyNavbar_LWe7" id="arm-machines-1">ARM Machines<a class="hash-link" href="#arm-machines-1" title="Direct link to heading">​</a></h3><p>Run the following in the <code>~/cw-contracts/contracts/nameservice</code> directory:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">TX_HASH</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">wasmd tx wasm store artifacts/cw_nameservice-aarch64.wasm --from celeswasm-key --keyring-backend </span><span class="token variable builtin class-name" style="color:rgb(189, 147, 249);font-style:italic">test</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> --chain-id celeswasm --gas-prices 0uwasm --gas auto --gas-adjustment </span><span class="token variable number" style="color:rgb(189, 147, 249);font-style:italic">1.3</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> --node http://127.0.0.1:26657 --output json -y </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> jq -r </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&#x27;.txhash&#x27;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$TX_HASH</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>This will get you the transaction hash for the smart contract deployment. Given
we are using Rollkit, there will be a delay on the transaction being included
due to Rollkit waiting on Celestia&#x27;s Data Availability Layer to confirm the block
has been included before submitting a new block.</p><div class="theme-admonition theme-admonition-danger alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>important</div><div class="admonitionContent_S0QG"><p>If you run into errors with variables on the previous command,
or commands in the remainder of the tutorial, cross-reference
the variables in the command with the variables in the <code>init.sh</code> script.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="contract-interaction-on-cosmwasm-with-celestia">Contract Interaction on CosmWasm with Celestia<a class="hash-link" href="#contract-interaction-on-cosmwasm-with-celestia" title="Direct link to heading">​</a></h2><p>In the previous steps, we have stored out contract&#x27;s tx hash in an
environment variable for later use.</p><p>Because of the longer time periods of submitting transactions via Rollkit
due to waiting on Celestia&#x27;s Data Availability Layer to confirm block inclusion,
we will need to query our  tx hash directly to get information about it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="contract-querying">Contract Querying<a class="hash-link" href="#contract-querying" title="Direct link to heading">​</a></h3><p>Let&#x27;s start by querying our transaction hash for its code ID:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">CODE_ID</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">wasmd query tx --type</span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">hash $TX_HASH --chain-id celeswasm --node http://127.0.0.1:26657 --output json </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> jq -r </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&#x27;.logs[0].events[-1].attributes[0].value&#x27;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$CODE_ID</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will give us back the Code ID of the deployed contract.</p><p>In our case, since it&#x27;s the first contract deployed on our local network,
the value is <code>1</code>.</p><p>Now, we can take a look at the contracts instantiated by this Code ID:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">wasmd query wasm list-contract-by-code </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$CODE_ID</span><span class="token plain"> --chain-id celeswasm --node http://127.0.0.1:26657 --output json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We get the following output:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token property">&quot;contracts&quot;</span><span class="token operator">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;pagination&quot;</span><span class="token operator">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token property">&quot;next_key&quot;</span><span class="token operator">:</span><span class="token null keyword" style="color:rgb(189, 147, 249);font-style:italic">null</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token property">&quot;total&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="contract-instantiation">Contract Instantiation<a class="hash-link" href="#contract-instantiation" title="Direct link to heading">​</a></h3><p>We start instantiating the contract by writing up the following <code>INIT</code> message
for nameservice contract. Here, we are specifying that <code>purchase_price</code> of a name
is <code>100uwasm</code> and <code>transfer_price</code> is <code>999uwasm</code>.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">INIT</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{&quot;purchase_price&quot;:{&quot;amount&quot;:&quot;100&quot;,&quot;denom&quot;:&quot;uwasm&quot;},&quot;transfer_price&quot;:{&quot;amount&quot;:&quot;999&quot;,&quot;denom&quot;:&quot;uwasm&quot;}}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wasmd tx wasm instantiate </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$CODE_ID</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$INIT</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"> --from celeswasm-key --keyring-backend </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">test</span><span class="token plain"> --label </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;name service&quot;</span><span class="token plain"> --chain-id celeswasm --gas-prices 0uwasm --gas auto --gas-adjustment </span><span class="token number">1.3</span><span class="token plain"> -y --no-admin --node http://127.0.0.1:26657</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="contract-interaction">Contract Interaction<a class="hash-link" href="#contract-interaction" title="Direct link to heading">​</a></h3><p>Now that we instantiated it, we can interact further with the contract:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">wasmd query wasm list-contract-by-code </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$CODE_ID</span><span class="token plain"> --chain-id celeswasm --output json --node http://127.0.0.1:26657</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">CONTRACT</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">wasmd query wasm list-contract-by-code $CODE_ID --chain-id celeswasm --output json --node http://127.0.0.1:26657 </span><span class="token variable operator" style="color:rgb(189, 147, 249);font-style:italic">|</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic"> jq -r </span><span class="token variable string" style="color:rgb(255, 121, 198);font-style:italic">&#x27;.contracts[-1]&#x27;</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$CONTRACT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wasmd query wasm contract --node http://127.0.0.1:26657 </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$CONTRACT</span><span class="token plain"> --chain-id celeswasm</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wasmd query bank balances --node http://127.0.0.1:26657 </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$CONTRACT</span><span class="token plain"> --chain-id celeswasm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This allows us to see the contract address, contract details, and
bank balances.</p><p>Your output will look similar to below:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;contracts&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;wasm14hj2tavq8fpesdwxxcu44rty3hh90vhujrvcmstl4zr3txmfvw9s0phg4d&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">,</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;pagination&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;next_key&quot;</span><span class="token plain">:null,</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;total&quot;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wasm14hj2tavq8fpesdwxxcu44rty3hh90vhujrvcmstl4zr3txmfvw9s0phg4d</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">address: wasm14hj2tavq8fpesdwxxcu44rty3hh90vhujrvcmstl4zr3txmfvw9s0phg4d</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">contract_info:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  admin: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  code_id: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  created: null</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  creator: wasm1y9ceqvnsnm9xtcdmhrjvv4rslgwfzmrzky2c5z</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  extension: null</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ibc_port_id: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  label: name </span><span class="token function" style="color:rgb(80, 250, 123)">service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">balances: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pagination:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  next_key: null</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  total: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, let&#x27;s register a name to the contract for our wallet address:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">REGISTER</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{&quot;register&quot;:{&quot;name&quot;:&quot;fred&quot;}}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wasmd tx wasm execute </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$CONTRACT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$REGISTER</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"> --amount 100uwasm --from celeswasm-key --chain-id celeswasm --gas-prices 0uwasm --gas auto --gas-adjustment </span><span class="token number">1.3</span><span class="token plain"> --node http://127.0.0.1:26657 --keyring-backend </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">test</span><span class="token plain"> -y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Your output will look similar to below:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">DEIP --keyring-backend </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">test</span><span class="token plain"> -y</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">gas estimate: </span><span class="token number">167533</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">code: </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">codespace: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">data: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">events: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">gas_used: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">gas_wanted: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">height: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">info: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">logs: </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">raw_log: </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;[]&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">timestamp: </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">tx: null</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">txhash: C147257485B72E7FFA5FDB943C94CE951A37817554339586FFD645AD2AA397C3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you try to register the same name again, you&#x27;ll see an expected error:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Error: rpc error: code </span><span class="token operator">=</span><span class="token plain"> Unknown desc </span><span class="token operator">=</span><span class="token plain"> rpc error: code </span><span class="token operator">=</span><span class="token plain"> Unknown desc </span><span class="token operator">=</span><span class="token plain"> failed to execute message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> message index: </span><span class="token number">0</span><span class="token plain">: Name has been taken </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">name fred</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">: execute wasm contract failed </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">CosmWasm/wasmd/x/wasm/keeper/keeper.go:364</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> With gas wanted: </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;0&#x27;</span><span class="token plain"> and gas used: </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;123809&#x27;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token plain"> unknown request</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Next, query the owner of the name record:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">NAME_QUERY</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{&quot;resolve_record&quot;: {&quot;name&quot;: &quot;fred&quot;}}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wasmd query wasm contract-state smart </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$CONTRACT</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">$NAME_QUERY</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token plain"> --chain-id celeswasm --node http://127.0.0.1:26657 --output json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You&#x27;ll see the owner&#x27;s address in a JSON response:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;data&quot;</span><span class="token plain">:</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;address&quot;</span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;wasm1y9ceqvnsnm9xtcdmhrjvv4rslgwfzmrzky2c5z&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With that, we have instantiated and interacted with the CosmWasm nameservice
smart contract using Celestia!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rollkit/docs/tree/main/docs/tutorials/cosmwasm.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/pr-preview/pr-79/docs/tutorials/wordle/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Wordle Tutorial</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/pr-preview/pr-79/docs/tutorials/ethermint/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Ethermint Tutorial</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#cosmwasm-dependency-installations" class="table-of-contents__link toc-highlight">CosmWasm Dependency Installations</a><ul><li><a href="#environment-setup" class="table-of-contents__link toc-highlight">Environment Setup</a></li><li><a href="#golang-dependency" class="table-of-contents__link toc-highlight">Golang Dependency</a></li><li><a href="#rust-installation" class="table-of-contents__link toc-highlight">Rust Installation</a></li><li><a href="#docker-installation" class="table-of-contents__link toc-highlight">Docker Installation</a></li><li><a href="#wasmd-installation" class="table-of-contents__link toc-highlight">wasmd Installation</a></li><li><a href="#celestia-node" class="table-of-contents__link toc-highlight">Celestia Node</a></li></ul></li><li><a href="#setting-up-your-environment-for-cosmwasm-on-celestia" class="table-of-contents__link toc-highlight">Setting Up Your Environment for CosmWasm on Celestia</a><ul><li><a href="#initializing-cosmwasm-rollup-with-a-bash-script" class="table-of-contents__link toc-highlight">Initializing Cosmwasm Rollup with a Bash Script</a></li><li><a href="#optional-see-whats-inside-the-script" class="table-of-contents__link toc-highlight">Optional: See what&#39;s inside the script</a></li></ul></li><li><a href="#contract-deployment-on-cosmwasm-with-rollkit" class="table-of-contents__link toc-highlight">Contract Deployment on CosmWasm with Rollkit</a><ul><li><a href="#compile-the-smart-contract" class="table-of-contents__link toc-highlight">Compile the Smart Contract</a></li><li><a href="#unit-tests" class="table-of-contents__link toc-highlight">Unit Tests</a></li><li><a href="#optimized-smart-contract" class="table-of-contents__link toc-highlight">Optimized Smart Contract</a></li><li><a href="#amd-machines" class="table-of-contents__link toc-highlight">AMD Machines</a></li><li><a href="#arm-machines" class="table-of-contents__link toc-highlight">ARM Machines</a></li><li><a href="#contract-deployment" class="table-of-contents__link toc-highlight">Contract Deployment</a></li><li><a href="#amd-machines-1" class="table-of-contents__link toc-highlight">AMD Machines</a></li><li><a href="#arm-machines-1" class="table-of-contents__link toc-highlight">ARM Machines</a></li></ul></li><li><a href="#contract-interaction-on-cosmwasm-with-celestia" class="table-of-contents__link toc-highlight">Contract Interaction on CosmWasm with Celestia</a><ul><li><a href="#contract-querying" class="table-of-contents__link toc-highlight">Contract Querying</a></li><li><a href="#contract-instantiation" class="table-of-contents__link toc-highlight">Contract Instantiation</a></li><li><a href="#contract-interaction" class="table-of-contents__link toc-highlight">Contract Interaction</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Rollkit</div></div></div></footer></div>
<script src="/pr-preview/pr-79/assets/js/runtime~main.e0b7e4af.js"></script>
<script src="/pr-preview/pr-79/assets/js/main.9b0ee162.js"></script>
</body>
</html>